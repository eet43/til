# AWS 통해 프론트 파일 배포하기

## 단어 설명

**Region : AWS idc 센터가 설치되어 있는 나라 ex)Korea** <br>
**Zone : region 나라 중 idc 센터가 설치되어 있는 특정 도시 ex)Seoul**<br>
**Bucket: S3 서비스에서 파일을 저장하는 저장소 단위 ex)Repository of Git**<br>
<br><br>
## S3 서비스란 ?
AWS 에서 제공하는 리소스 중 하나로 네이버 클라우드, 구글 드라이브와 같이 파일 업로드 기능을 제공한다.<br>
서비스에서 유저 프로필을 저장하고 관리하는 용도로도 사용이 가능하지만, index.html 프론트 정적 파일을 업로드해 배포할 수도 있다..<br>
디폴트로는 AWS 계정 오너에게만 파일 열람 권한이 있기 때문에, 권한을 설정 해주어야 한다.<br>



<br><br>
## 환경설정
**iam : AWS 에서 제공하는 리소스 중 하나로 키 값을 통해 다른 리소스에 대한 접근을 관리해준다.** <br>
**프로젝트 코드에서 AWS 리소스에 접근하고 싶을 경우 iam 리소스를 통해 연결한다 ( 핵심 키 값들을 통해 )** <br><br>

**AWS CLI : AWS 리소스들을 통합 관리해주는 CLi 관리 sdk (software development kit)이다. 명령어가 기존 리눅스와 조금 달라서 필요할 때 찾는 걸 추천한다** <br>
**초기 설정 명령어는 aws configure 이다. 키 값을 통해 계정을 등록할 수 있다.** <br><br>

**boto3 lib : Python과 AWS를 연결해주는 라이브러리이다. pip install boto3 을 통해 설치했다** <br>


<br><br>
## 아키텍처
**monolithic : 프로젝트 모든 부분을 하나의 서버에 배치**<br>
**msa : 프론트, 백엔드를 물리적으로 다른 서버에 배치**<br><br>
현재는 msa 방식 채택 => 회원 쪽 코드를 고쳤는데 전체 사이트가 에러가 난다 던지, 결제를 고쳤는데 유저 로그인에서 에러가 난다던지 하는 의존성을 낮추기 위함 <br><br>

**cloud front : AWS 에서 제공하는 정적파일들을 캐싱해주는 cdn 서비스 리소스로, 세계 각국에서 cloud front 도메인으로 접속하면 한국 리전에서 파일을 가져오는게 아니라, 각국 제일 가까운 리전의 캐시메모리에서 값을 가져오므로 비교할 수 없이 빠르다.
무료다.**<br>
clout front 리소스를 생성할 때, S3 리소스를 연결 시켜주면 끝난다. 그렇게 되면 s3에 index.html 파일을 올리면 자동으로 해당 파일이 cloudfront 리소스에도 올라가고 캐시 메모리에도 적재되어 전세계에서 해당 도메인으로 쉽게 접근할 수 있다. <br><br>

## CI/CD

**ci : 소스를 형성 관리로 계속 통합하는 것 ( git )**<br>
**cd : 업데이트 되는 코드를 서버로 전송하고 배포하는 것**<br>
**트랜드 : ci/cd 개발하면서 원격 저장소로 계속 통합하면서 클라우드 서버로 계속 전송 배포하는것. ci만 하다보면 코드가 계속 쌓이고 한 번에 배포했을 때 어떤 문제점이 생길지 모른다.**<br>
**가능한 이유 : 마이크로 서비스 아키텍쳐로 서비스가 잘게 쪼개져 구성되어 있기 때문에 가능하다.**<br>
**배포 방법 ? .github/workflows/main.yml 을 설정하면 된다.**<br>


### 서비스 로직 : 코드 수정 -> 깃허브 원격 저장소로 코드 푸쉬 -> 자동으로 s3 cloudfront 서버로 코드 업데이트 (iam 권한이 있어야한다) -> 캐싱메모리에 있던 코드 수정<br><br>

## ETC

Git 을 좀더 잘 쓰는 방법 : 파이참, 인텔리제이와 깃허브 연결한 다음, 설정파일에 가서 내 깃 프로필을 등록하면 보다 더 쉽게 사용할 수 있다.
깃허브에 secret action 이라고 키 값을 관리하는 설정부분이 있다. main.yml 코드에서는 secrets.id 값으로 접근하면 되는데 프로젝트에서 관리하는 설정 키들이랑 어떤 차이점이 있을까 ?
